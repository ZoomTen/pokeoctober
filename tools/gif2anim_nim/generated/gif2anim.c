/* Generated by Nim Compiler v2.0.4 */
#define NIM_INTBITS 64
#define NIM_EmulateOverflowChecks

#include "nimbase.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ;
typedef struct tyTuple__kubDQF3feIfhpvzu9cioZEQ tyTuple__kubDQF3feIfhpvzu9cioZEQ;
typedef struct tyObject_Result__OGjVj6DzOIQh7vRlUXLS2g tyObject_Result__OGjVj6DzOIQh7vRlUXLS2g;
typedef struct tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ;
typedef struct tyObject_Metadata__ogSB5H2MddV9ccmoCdg8kyQ tyObject_Metadata__ogSB5H2MddV9ccmoCdg8kyQ;
typedef struct tyObject_Result__4k04jCIwEJuHCTsMpc8DsQ tyObject_Result__4k04jCIwEJuHCTsMpc8DsQ;
typedef struct tySequence__YdLNCDKYeipzJx3I8Xw82Q tySequence__YdLNCDKYeipzJx3I8Xw82Q;
typedef struct tySequence__YdLNCDKYeipzJx3I8Xw82Q_Content tySequence__YdLNCDKYeipzJx3I8Xw82Q_Content;
typedef struct tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA;
typedef struct tySequence__yG0TUOfnWu9aLROxC8jICAQ tySequence__yG0TUOfnWu9aLROxC8jICAQ;
typedef struct tySequence__yG0TUOfnWu9aLROxC8jICAQ_Content tySequence__yG0TUOfnWu9aLROxC8jICAQ_Content;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g tySequence__qwqHTkRvwhrRyENtudHQ7g;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content tySequence__qwqHTkRvwhrRyENtudHQ7g_Content;
typedef struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ tySequence__6H5Oh5UUvVCLiakt9aTwtUQ;
typedef struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content;
typedef struct tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ;
typedef struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ;
typedef struct tyTuple__P2Sbz31FZcFybWKcK3NeNg tyTuple__P2Sbz31FZcFybWKcK3NeNg;
typedef struct tyObject_Result__kue3gztNzyRwTcJnckb9bwg tyObject_Result__kue3gztNzyRwTcJnckb9bwg;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct tySequence__XG4R01knG9cEwdYd9bcmBqNA tySequence__XG4R01knG9cEwdYd9bcmBqNA;
typedef struct tySequence__XG4R01knG9cEwdYd9bcmBqNA_Content tySequence__XG4R01knG9cEwdYd9bcmBqNA_Content;
typedef struct tyObject_ValueError__Fdda0I9b5VRT5b7JNt3Ok2g tyObject_ValueError__Fdda0I9b5VRT5b7JNt3Ok2g;
typedef struct tyObject_CatchableError__6ZSwHJ2XlTWRVjglvm4hzA tyObject_CatchableError__6ZSwHJ2XlTWRVjglvm4hzA;
typedef struct tyObject_IOError__Qi3evlt89aqWKwrBQyvZbmQ tyObject_IOError__Qi3evlt89aqWKwrBQyvZbmQ;
typedef struct tyObject_StackTraceEntry__WkvFOV75fZrMSq9cfulfsdA tyObject_StackTraceEntry__WkvFOV75fZrMSq9cfulfsdA;
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
typedef NimStringV2 tyArray__nHXaesL0DJZHyVS07ARPRA[1];
typedef NI64 tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg;
struct tyTuple__kubDQF3feIfhpvzu9cioZEQ {
tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg Field0;
NimStringV2 Field1;
};
struct tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ {
	NIM_BOOL oResultPrivate;
union{
struct {	tyTuple__kubDQF3feIfhpvzu9cioZEQ eResultPrivate;
} _oResultPrivate_1;
};
};
struct tyObject_Result__OGjVj6DzOIQh7vRlUXLS2g {
	NIM_BOOL oResultPrivate;
union{
struct {	NCSTRING eResultPrivate;
} _oResultPrivate_1;
struct {	tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ* vResultPrivate;
} _oResultPrivate_2;
};
};
typedef NU16 tyEnum_ImageFormat__T18q6xMMu4wMhFoUnRj1Lg;
typedef NU8 tyEnum_ColorFormat__V6EoR7xfVb9aBAdfHhOYGcg;
struct tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ {
	tyEnum_ImageFormat__T18q6xMMu4wMhFoUnRj1Lg type_0;
	NU8 max_palette_index;
	tyEnum_ColorFormat__V6EoR7xfVb9aBAdfHhOYGcg color_format;
	NU32 frames;
	NU32 height;
	NU32 width;
	void* allocator;
	tyObject_Metadata__ogSB5H2MddV9ccmoCdg8kyQ* metadata;
	NU8* palette;
	NU8* data;
	void* userdata;
};
struct tySequence__YdLNCDKYeipzJx3I8Xw82Q {
  NI len; tySequence__YdLNCDKYeipzJx3I8Xw82Q_Content* p;
};
struct tyObject_Result__4k04jCIwEJuHCTsMpc8DsQ {
	NIM_BOOL oResultPrivate;
union{
struct {	NCSTRING eResultPrivate;
} _oResultPrivate_1;
struct {	tySequence__YdLNCDKYeipzJx3I8Xw82Q vResultPrivate;
} _oResultPrivate_2;
};
};
struct tySequence__yG0TUOfnWu9aLROxC8jICAQ {
  NI len; tySequence__yG0TUOfnWu9aLROxC8jICAQ_Content* p;
};
struct tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA {
	tySequence__yG0TUOfnWu9aLROxC8jICAQ data;
	NI counter;
	NI first;
	NI last;
};
struct tySequence__qwqHTkRvwhrRyENtudHQ7g {
  NI len; tySequence__qwqHTkRvwhrRyENtudHQ7g_Content* p;
};
struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ {
  NI len; tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content* p;
};
struct tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ {
	NIM_BOOL oResultPrivate;
union{
struct {	NCSTRING eResultPrivate;
} _oResultPrivate_1;
struct {	tySequence__6H5Oh5UUvVCLiakt9aTwtUQ vResultPrivate;
} _oResultPrivate_2;
};
};
struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ {
NI Field0;
NI Field1;
};
typedef NU8 tyUncheckedArray__nMUrxcwM7yrVbfFpM3W4Sw[1];
struct tyTuple__P2Sbz31FZcFybWKcK3NeNg {
NI Field0;
NI Field1;
NI Field2;
tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ Field3;
};
struct tyObject_Result__kue3gztNzyRwTcJnckb9bwg {
	NIM_BOOL oResultPrivate;
union{
struct {	NCSTRING eResultPrivate;
} _oResultPrivate_1;
};
};
typedef NU8 tyEnum_FileMode__kCMmS8eA26MuSzmlLMiiIg;
struct TNimTypeV2 {
	void* destructor;
	NI size;
	NI16 align;
	NI16 depth;
	NU32* display;
	void* traceImpl;
	void* typeInfoV1;
	NI flags;
};
struct RootObj {
TNimTypeV2* m_type;
};
struct tySequence__XG4R01knG9cEwdYd9bcmBqNA {
  NI len; tySequence__XG4R01knG9cEwdYd9bcmBqNA_Content* p;
};
struct Exception {
  RootObj Sup;
	Exception* parent;
	NCSTRING name;
	NimStringV2 message;
	tySequence__XG4R01knG9cEwdYd9bcmBqNA trace;
	Exception* up;
};
struct tyObject_CatchableError__6ZSwHJ2XlTWRVjglvm4hzA {
  Exception Sup;
};
struct tyObject_ValueError__Fdda0I9b5VRT5b7JNt3Ok2g {
  tyObject_CatchableError__6ZSwHJ2XlTWRVjglvm4hzA Sup;
};
struct tyObject_IOError__Qi3evlt89aqWKwrBQyvZbmQ {
  tyObject_CatchableError__6ZSwHJ2XlTWRVjglvm4hzA Sup;
};
struct tySequence__YdLNCDKYeipzJx3I8Xw82Q_Content { NI cap; NU64 data[SEQ_DECL_SIZE]; };
struct tySequence__yG0TUOfnWu9aLROxC8jICAQ_Content { NI cap; tyTuple__P2Sbz31FZcFybWKcK3NeNg data[SEQ_DECL_SIZE]; };
struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content { NI cap; NI data[SEQ_DECL_SIZE]; };
struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content { NI cap; NU8 data[SEQ_DECL_SIZE]; };
struct tyObject_StackTraceEntry__WkvFOV75fZrMSq9cfulfsdA {
	NCSTRING procname;
	NI line;
	NCSTRING filename;
};
struct tySequence__XG4R01knG9cEwdYd9bcmBqNA_Content { NI cap; tyObject_StackTraceEntry__WkvFOV75fZrMSq9cfulfsdA data[SEQ_DECL_SIZE]; };
static N_INLINE(void, writeLine__gif50anim_u3074)(FILE* f_p0, NimStringV2* x_p1, NI x_p1Len_0);
N_LIB_PRIVATE N_NIMCALL(void, write__stdZsyncio_u233)(FILE* f_p0, NimStringV2 s_p1);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
static N_INLINE(void, quit__system_u5504)(NI errorcode_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, cstrToNimstr)(NCSTRING str_p0);
N_LIB_PRIVATE N_NIMCALL(void, main__gif50anim_u38)(NimStringV2 filename_p0, NimStringV2 outputdirectory_p1, tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ* Result);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(tyObject_Result__OGjVj6DzOIQh7vRlUXLS2g, loadImage__plumZplum_u5)(NimStringV2 filename_p0, NI mode_p1);
N_LIB_PRIVATE N_NIMCALL(NCSTRING, error__gif50anim_u51)(tyObject_Result__OGjVj6DzOIQh7vRlUXLS2g self_p0);
static N_INLINE(tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ*, value__gif50anim_u89)(tyObject_Result__OGjVj6DzOIQh7vRlUXLS2g self_p0);
N_LIB_PRIVATE N_NOINLINE(void, raiseResultDefect__gif50anim_u96)(NimStringV2 m_p0, NCSTRING v_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Result__4k04jCIwEJuHCTsMpc8DsQ, getFrameDurations__plumZplum_u277)(tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ* image_p0);
N_LIB_PRIVATE N_NOCONV(void, dealloc)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZtimes_u2300)(tySequence__6H5Oh5UUvVCLiakt9aTwtUQ dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___plumZplum_u233)(tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___gif50anim_u3187)(tySequence__qwqHTkRvwhrRyENtudHQ7g dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___gif50anim_u3167)(tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___plumZplum_u335)(tySequence__YdLNCDKYeipzJx3I8Xw82Q dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___plumZplum_u470)(tyObject_Result__4k04jCIwEJuHCTsMpc8DsQ* dest_p0);
N_CDECL(void, plum_destroy_image)(tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ* image_p0);
static N_INLINE(tySequence__YdLNCDKYeipzJx3I8Xw82Q, value__gif50anim_u142)(tyObject_Result__4k04jCIwEJuHCTsMpc8DsQ self_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___plumZplum_u338)(tySequence__YdLNCDKYeipzJx3I8Xw82Q* dest_p0, tySequence__YdLNCDKYeipzJx3I8Xw82Q src_p1);
N_LIB_PRIVATE N_NIMCALL(void, initOrderedTable__gif50anim_u154)(NI initialSize_p0, tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA* Result);
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap_p0, NI elemSize_p1, NI elemAlign_p2);
N_LIB_PRIVATE N_NIMCALL(NI, hash__gif50anim_u363)(tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ x_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ, X5BX5D___plumZplum_u82)(tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ* img_p0, NI frameNumber_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, contains__gif50anim_u428)(tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA* t_p0, NI key_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__gif50anim_u1112)(tySequence__qwqHTkRvwhrRyENtudHQ7g* x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ*, X5BX5D___gif50anim_u764)(tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA* t_p0, NI key_p1);
N_LIB_PRIVATE N_NIMCALL(void, X5BX5Deq___gif50anim_u1179)(tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA* t_p0, NI key_p1, tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ val_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___plumZplum_u152)(tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ* dest_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ*, makeImage__plumZplum_u219)(void);
static N_INLINE(NI, len__gif50anim_u2517)(tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA* t_p0);
N_LIB_PRIVATE N_NIMCALL(tySequence__6H5Oh5UUvVCLiakt9aTwtUQ, newSeqUninitialized__plumZplum_u112)(NI len_p0);
static N_INLINE(NIM_BOOL, isFilled__pureZcollectionsZtables_u32)(NI hcode_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___gif50anim_u3152)(tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ* dest_p0, tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ* src_p1);
N_LIB_PRIVATE N_NIMCALL(NCSTRING, error__gif50anim_u2862)(tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ self_p0);
static N_INLINE(tySequence__6H5Oh5UUvVCLiakt9aTwtUQ, value__gif50anim_u2996)(tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ self_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___pureZtimes_u2303)(tySequence__6H5Oh5UUvVCLiakt9aTwtUQ* dest_p0, tySequence__6H5Oh5UUvVCLiakt9aTwtUQ src_p1);
static N_INLINE(void, copyMem__system_u1740)(void* dest_p0, void* source_p1, NI size_p2);
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nosdirExists)(NimStringV2 dir_p0);
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Result__kue3gztNzyRwTcJnckb9bwg, saveImageAs__plumZplum_u175)(tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ* image_p0, NimStringV2 filename_p1);
static N_INLINE(NimStringV2, slash___stdZpaths_u45)(NimStringV2 head_p0, NimStringV2 tail_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosjoinPath)(NimStringV2 head_p0, NimStringV2 tail_p1);
N_LIB_PRIVATE N_NIMCALL(NCSTRING, error__gif50anim_u3034)(tyObject_Result__kue3gztNzyRwTcJnckb9bwg self_p0);
N_LIB_PRIVATE N_NIMCALL(FILE*, open__stdZsyncio_u458)(NimStringV2 filename_p0, tyEnum_FileMode__kCMmS8eA26MuSzmlLMiiIg mode_p1, NI bufSize_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuAlignString)(NimStringV2 s_p0, NI count_p1, NIM_CHAR padding_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___systemZdollars_u3)(NI x_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___systemZdollars_u9)(NU64 x_p0);
N_LIB_PRIVATE N_NIMCALL(void, close__stdZsyncio_u245)(FILE* f_p0);
static N_INLINE(NIM_BOOL, isObjDisplayCheck)(TNimTypeV2* source_p0, NI16 targetDepth_p1, NU32 token_p2);
static N_INLINE(Exception*, nimBorrowCurrentException)(void);
static N_INLINE(Exception*, getCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___stdZassertions_u35)(Exception** dest_p0, Exception* src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, eqdup___stdZassertions_u19)(NimStringV2 src_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZparseutils_u358)(tyObject_ValueError__Fdda0I9b5VRT5b7JNt3Ok2g* dest_p0);
static N_INLINE(void, popCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u6230)(tyObject_IOError__Qi3evlt89aqWKwrBQyvZbmQ* dest_p0);
N_LIB_PRIVATE N_NIMCALL(tyTuple__kubDQF3feIfhpvzu9cioZEQ, error__gif50anim_u3387)(tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ* self_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___gif50anim_u3125)(tyTuple__kubDQF3feIfhpvzu9cioZEQ* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___gif50anim_u3143)(tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, nimTestErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, atmdotdotatsdotdotatsdotdotatsdotdotatsdotdotatsoptatsnimatslibatssystemdotnim_Init000)(void);
N_LIB_PRIVATE N_NIMCALL(void, NimMainModule)(void);
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_2 = { 1 | NIM_STRLIT_FLAG, "\012" };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_3 = {1, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_2};
static const struct {
  NI cap; NIM_CHAR data[32+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_5 = { 32 | NIM_STRLIT_FLAG, "gif2anim source.gif output_path/" };
static const struct {
  NI cap; NIM_CHAR data[38+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_6 = { 38 | NIM_STRLIT_FLAG, "Trying to access value with err Result" };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_7 = {38, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_6};
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_8 = {38, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_6};
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_9 = {38, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_6};
static const struct {
  NI cap; NIM_CHAR data[10+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_10 = { 10 | NIM_STRLIT_FLAG, "directory " };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_11 = {10, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_10};
static const struct {
  NI cap; NIM_CHAR data[15+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_12 = { 15 | NIM_STRLIT_FLAG, " does not exist" };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_13 = {15, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_12};
static const struct {
  NI cap; NIM_CHAR data[9+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_14 = { 9 | NIM_STRLIT_FLAG, "front.png" };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_15 = {9, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_14};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_16 = { 24 | NIM_STRLIT_FLAG, "error saving front.png: " };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_17 = {24, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_16};
static const struct {
  NI cap; NIM_CHAR data[8+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_18 = { 8 | NIM_STRLIT_FLAG, "anim.asm" };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_19 = {8, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_18};
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_20 = { 7 | NIM_STRLIT_FLAG, "\011frame " };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_21 = {7, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_20};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_22 = { 2 | NIM_STRLIT_FLAG, ", " };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_23 = {2, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_22};
static const struct {
  NI cap; NIM_CHAR data[8+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_25 = { 8 | NIM_STRLIT_FLAG, "\011endanim" };
static const struct {
  NI cap; NIM_CHAR data[0+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_26 = { 0 | NIM_STRLIT_FLAG, "" };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_27 = {0, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_26};
static const struct {
  NI cap; NIM_CHAR data[20+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_28 = { 20 | NIM_STRLIT_FLAG, "while loading image " };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_29 = {20, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_28};
static const struct {
  NI cap; NIM_CHAR data[20+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_30 = { 20 | NIM_STRLIT_FLAG, "while creating image" };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_31 = {20, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_30};
static const struct {
  NI cap; NIM_CHAR data[18+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_32 = { 18 | NIM_STRLIT_FLAG, "while saving image" };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_33 = {18, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_32};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_34 = { 24 | NIM_STRLIT_FLAG, "while saving frame order" };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_35 = {24, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_34};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__V84sYTa2XfwkRnO1E5HVXQ_36 = { 2 | NIM_STRLIT_FLAG, ": " };
static const NimStringV2 TM__V84sYTa2XfwkRnO1E5HVXQ_37 = {2, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_36};
static NIM_CONST tyArray__nHXaesL0DJZHyVS07ARPRA TM__V84sYTa2XfwkRnO1E5HVXQ_4 = {{32, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_5}}
;
static NIM_CONST tyArray__nHXaesL0DJZHyVS07ARPRA TM__V84sYTa2XfwkRnO1E5HVXQ_24 = {{8, (NimStrPayload*)&TM__V84sYTa2XfwkRnO1E5HVXQ_25}}
;
extern int cmdCount;
extern NCSTRING* cmdLine;
extern NIM_BOOL nimInErrorMode__system_u3439;
N_LIB_PRIVATE NI result__gif50anim_u3377 = ((NI)0);
N_LIB_PRIVATE NimStringV2 inputfile__gif50anim_u3378;
N_LIB_PRIVATE NimStringV2 outputdirectory__gif50anim_u3379;
N_LIB_PRIVATE tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ programresult__gif50anim_u3380;
extern Exception* currException__system_u3150;
N_LIB_PRIVATE tyTuple__kubDQF3feIfhpvzu9cioZEQ error__gif50anim_u3392;
N_LIB_PRIVATE NimStringV2 preamble__gif50anim_u3393;
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (&nimInErrorMode__system_u3439);
	return result;
}
static N_INLINE(void, writeLine__gif50anim_u3074)(FILE* f_p0, NimStringV2* x_p1, NI x_p1Len_0) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NimStringV2* i;
		NI i_2;
		i = (NimStringV2*)0;
		i_2 = ((NI)0);
		{
			while (1) {
				if (!(i_2 < x_p1Len_0)) goto LA3;
				i = (&x_p1[i_2]);
				write__stdZsyncio_u233(f_p0, (*i));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				i_2 += ((NI)1);
			} LA3: ;
		}
	}
	write__stdZsyncio_u233(f_p0, TM__V84sYTa2XfwkRnO1E5HVXQ_3);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, quit__system_u5504)(NI errorcode_p0) {
	{
		if (!(errorcode_p0 < ((NI)-128))) goto LA3_;
		exit(((int)-128));
	}
	goto LA1_;
LA3_: ;
	{
		if (!(((NI)127) < errorcode_p0)) goto LA6_;
		exit(((int)127));
	}
	goto LA1_;
LA6_: ;
	{
		exit(((int) (errorcode_p0)));
	}
LA1_: ;
}
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
	nimSetMem__systemZmemory_u7(p_p0, ((int)0), size_p1);
}
static N_INLINE(tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ*, value__gif50anim_u89)(tyObject_Result__OGjVj6DzOIQh7vRlUXLS2g self_p0) {
	tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ* result;
	result = (tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ*)0;
	switch (self_p0.oResultPrivate) {
	case NIM_FALSE:
	{
		raiseResultDefect__gif50anim_u96(TM__V84sYTa2XfwkRnO1E5HVXQ_7, self_p0._oResultPrivate_1.eResultPrivate);
	}
	break;
	case NIM_TRUE:
	{
		result = self_p0._oResultPrivate_2.vResultPrivate;
	}
	break;
	default:
	{
	}
	break;
	}
	return result;
}
static N_INLINE(tySequence__YdLNCDKYeipzJx3I8Xw82Q, value__gif50anim_u142)(tyObject_Result__4k04jCIwEJuHCTsMpc8DsQ self_p0) {
	tySequence__YdLNCDKYeipzJx3I8Xw82Q result;
	result.len = 0; result.p = NIM_NIL;
	switch (self_p0.oResultPrivate) {
	case NIM_FALSE:
	{
		raiseResultDefect__gif50anim_u96(TM__V84sYTa2XfwkRnO1E5HVXQ_8, self_p0._oResultPrivate_1.eResultPrivate);
	}
	break;
	case NIM_TRUE:
	{
		eqcopy___plumZplum_u338((&result), self_p0._oResultPrivate_2.vResultPrivate);
	}
	break;
	default:
	{
	}
	break;
	}
	return result;
}
static N_INLINE(NI, len__gif50anim_u2517)(tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA* t_p0) {
	NI result;
	result = (*t_p0).counter;
	return result;
}
static N_INLINE(NIM_BOOL, isFilled__pureZcollectionsZtables_u32)(NI hcode_p0) {
	NIM_BOOL result;
	result = !((hcode_p0 == ((NI)0)));
	return result;
}
static N_INLINE(tySequence__6H5Oh5UUvVCLiakt9aTwtUQ, value__gif50anim_u2996)(tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ self_p0) {
	tySequence__6H5Oh5UUvVCLiakt9aTwtUQ result;
	result.len = 0; result.p = NIM_NIL;
	switch (self_p0.oResultPrivate) {
	case NIM_FALSE:
	{
		raiseResultDefect__gif50anim_u96(TM__V84sYTa2XfwkRnO1E5HVXQ_9, self_p0._oResultPrivate_1.eResultPrivate);
	}
	break;
	case NIM_TRUE:
	{
		eqcopy___pureZtimes_u2303((&result), self_p0._oResultPrivate_2.vResultPrivate);
	}
	break;
	default:
	{
	}
	break;
	}
	return result;
}
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest_p0, source_p1, ((size_t) (size_p2)));
}
static N_INLINE(void, copyMem__system_u1740)(void* dest_p0, void* source_p1, NI size_p2) {
	nimCopyMem(dest_p0, source_p1, size_p2);
}
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1) {
	{
		if (!(((NI)0) < src_p1.len)) goto LA3_;
		copyMem__system_u1740(((void*) ((&(*(*dest_p0).p).data[(*dest_p0).len]))), ((void*) ((&(*src_p1.p).data[((NI)0)]))), ((NI) ((NI)(src_p1.len + ((NI)1)))));
		(*dest_p0).len += src_p1.len;
	}
LA3_: ;
}
static N_INLINE(NimStringV2, slash___stdZpaths_u45)(NimStringV2 head_p0, NimStringV2 tail_p1) {
	NimStringV2 result;
	result = nosjoinPath(head_p0, tail_p1);
	return result;
}
static N_INLINE(NIM_BOOL, isObjDisplayCheck)(TNimTypeV2* source_p0, NI16 targetDepth_p1, NU32 token_p2) {
	NIM_BOOL result;
	NIM_BOOL T1_;
	T1_ = (NIM_BOOL)0;
	T1_ = (targetDepth_p1 <= (*source_p0).depth);
	if (!(T1_)) goto LA2_;
	T1_ = ((*source_p0).display[targetDepth_p1] == token_p2);
LA2_: ;
	result = T1_;
	return result;
}
static N_INLINE(Exception*, nimBorrowCurrentException)(void) {
	Exception* result;
	result = currException__system_u3150;
	return result;
}
static N_INLINE(Exception*, getCurrentException)(void) {
	Exception* result;
	result = NIM_NIL;
	eqcopy___stdZassertions_u35(&result, currException__system_u3150);
	return result;
}
static N_INLINE(void, popCurrentException)(void) {
	eqcopy___stdZassertions_u35(&currException__system_u3150, (*currException__system_u3150).up);
}
N_LIB_PRIVATE N_NIMCALL(void, main__gif50anim_u38)(NimStringV2 filename_p0, NimStringV2 outputdirectory_p1, tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ* Result) {
	tyObject_Result__OGjVj6DzOIQh7vRlUXLS2g imageresult;
	tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ* image;
	tyObject_Result__4k04jCIwEJuHCTsMpc8DsQ framedurationsresult;
	tySequence__YdLNCDKYeipzJx3I8Xw82Q framedurations;
	tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA hashtoorigframenummapping;
	tySequence__qwqHTkRvwhrRyENtudHQ7g sequenceofnewframenums;
	tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ* outputpng;
	tySequence__6H5Oh5UUvVCLiakt9aTwtUQ canvas;
	NimStringV2 colontmpD_;
	NI newframenumber;
	tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ outputpngsize;
	NI T31_;
	NI pngframeindex;
	tyObject_Result__kue3gztNzyRwTcJnckb9bwg imageexportresult;
	NimStringV2 asmfilename;
	FILE* asmfile;
	FILE* T86_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ));
	imageresult = loadImage__plumZplum_u5(filename_p0, ((NI)13824));
	{
		NCSTRING T5_;
		if (!!(imageresult.oResultPrivate)) goto LA3_;
		(*Result).oResultPrivate = NIM_FALSE;
		(*Result)._oResultPrivate_1.eResultPrivate.Field0 = ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)1);
		T5_ = (NCSTRING)0;
		T5_ = error__gif50anim_u51(imageresult);
		(*Result)._oResultPrivate_1.eResultPrivate.Field1 = cstrToNimstr(T5_);
		goto BeforeRet_;
	}
LA3_: ;
	image = value__gif50anim_u89(imageresult);
	nimZeroMem((void*)(&framedurationsresult), sizeof(tyObject_Result__4k04jCIwEJuHCTsMpc8DsQ));
	framedurations.len = 0; framedurations.p = NIM_NIL;
	nimZeroMem((void*)(&hashtoorigframenummapping), sizeof(tyObject_OrderedTable__uinGzf9aWpGdBVWVMTSpy9aA));
	sequenceofnewframenums.len = 0; sequenceofnewframenums.p = NIM_NIL;
	outputpng = NIM_NIL;
	canvas.len = 0; canvas.p = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	framedurationsresult = getFrameDurations__plumZplum_u277(image);
	{
		NCSTRING T12_;
		if (!!(framedurationsresult.oResultPrivate)) goto LA10_;
		(*Result).oResultPrivate = NIM_FALSE;
		(*Result)._oResultPrivate_1.eResultPrivate.Field0 = ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)1);
		T12_ = (NCSTRING)0;
		T12_ = error__gif50anim_u51(imageresult);
		(*Result)._oResultPrivate_1.eResultPrivate.Field1 = cstrToNimstr(T12_);
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
		eqdestroy___pureZtimes_u2300(canvas);
		eqdestroy___plumZplum_u233(outputpng);
		eqdestroy___gif50anim_u3187(sequenceofnewframenums);
		eqdestroy___gif50anim_u3167((&hashtoorigframenummapping));
		eqdestroy___plumZplum_u335(framedurations);
		eqdestroy___plumZplum_u470((&framedurationsresult));
		{
			if (!!(((*image).allocator == NIM_NIL))) goto LA15_;
			plum_destroy_image(image);
		}
LA15_: ;
		goto BeforeRet_;
	}
LA10_: ;
	framedurations = value__gif50anim_u142(framedurationsresult);
	initOrderedTable__gif50anim_u154(((NI)32), (&hashtoorigframenummapping));
	newframenumber = ((NI)0);
	sequenceofnewframenums.len = 0; sequenceofnewframenums.p = (tySequence__qwqHTkRvwhrRyENtudHQ7g_Content*) newSeqPayload(0, sizeof(NI), NIM_ALIGNOF(NI));
	{
		NI i;
		NI colontmp_;
		NI i_2;
		i = (NI)0;
		colontmp_ = (NI)0;
		colontmp_ = ((NI) ((*image).frames));
		i_2 = ((NI)0);
		{
			while (1) {
				tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ colontmpD__2;
				NI hash;
				if (!(i_2 < colontmp_)) goto LA19;
				nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ));
				i = i_2;
				colontmpD__2 = X5BX5D___plumZplum_u82(image, i);
				hash = hash__gif50anim_u363(colontmpD__2);
				{
					NIM_BOOL T23_;
					NI colontmpD__3;
					tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ* T26_;
					T23_ = (NIM_BOOL)0;
					T23_ = contains__gif50anim_u428((&hashtoorigframenummapping), hash);
					if (!T23_) goto LA24_;
					colontmpD__3 = (NI)0;
					T26_ = (tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ*)0;
					T26_ = X5BX5D___gif50anim_u764((&hashtoorigframenummapping), hash);
					if (NIM_UNLIKELY(*nimErr_)) goto LA20_;
					colontmpD__3 = (*T26_).Field1;
					add__gif50anim_u1112((&sequenceofnewframenums), colontmpD__3);
				}
				goto LA21_;
LA24_: ;
				{
					tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ T28_;
					T28_.Field0 = i;
					T28_.Field1 = newframenumber;
					X5BX5Deq___gif50anim_u1179((&hashtoorigframenummapping), hash, T28_);
					add__gif50anim_u1112((&sequenceofnewframenums), newframenumber);
					newframenumber += ((NI)1);
				}
LA21_: ;
				i_2 += ((NI)1);
				{
					LA20_:;
				}
				{
					eqdestroy___plumZplum_u152((&colontmpD__2));
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
			} LA19: ;
		}
	}
	outputpng = makeImage__plumZplum_u219();
	outputpngsize.Field0 = ((NI) ((*image).width));
	T31_ = (NI)0;
	T31_ = len__gif50anim_u2517((&hashtoorigframenummapping));
	outputpngsize.Field1 = (NI)(((NI) ((*image).height)) * T31_);
	canvas = newSeqUninitialized__plumZplum_u112(((NI) ((NI)(outputpngsize.Field0 * outputpngsize.Field1))));
	(*outputpng).type_0 = ((tyEnum_ImageFormat__T18q6xMMu4wMhFoUnRj1Lg)3);
	(*outputpng).max_palette_index = (*image).max_palette_index;
	(*outputpng).color_format = (*image).color_format;
	(*outputpng).palette = (*image).palette;
	(*outputpng).frames = ((NU32)1);
	(*outputpng).width = ((NU32) (outputpngsize.Field0));
	(*outputpng).height = ((NU32) (outputpngsize.Field1));
	pngframeindex = ((NI)0);
	{
		NI* i_3;
		NI L;
		i_3 = (NI*)0;
		L = len__gif50anim_u2517((&hashtoorigframenummapping));
		{
			NI h;
			if (!(((NI)0) < hashtoorigframenummapping.counter)) goto LA35_;
			h = hashtoorigframenummapping.first;
			{
				while (1) {
					NI nxt;
					if (!(((NI)0) <= h)) goto LA38;
					nxt = hashtoorigframenummapping.data.p->data[h].Field1;
					{
						NIM_BOOL T41_;
						tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ extractresult;
						tySequence__6H5Oh5UUvVCLiakt9aTwtUQ extract;
						NI gotpngframenumber;
						tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ* T45_;
						NI T56_;
						void* T57_;
						NI T58_;
						T41_ = (NIM_BOOL)0;
						T41_ = isFilled__pureZcollectionsZtables_u32(hashtoorigframenummapping.data.p->data[h].Field0);
						if (!T41_) goto LA42_;
						nimZeroMem((void*)(&extractresult), sizeof(tyObject_Result__GLXz9aENXQdHR5vUaWfCInQ));
						extract.len = 0; extract.p = NIM_NIL;
						i_3 = (&hashtoorigframenummapping.data.p->data[h].Field2);
						T45_ = (tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ*)0;
						T45_ = X5BX5D___gif50anim_u764((&hashtoorigframenummapping), (*i_3));
						if (NIM_UNLIKELY(*nimErr_)) goto LA44_;
						gotpngframenumber = (*T45_).Field0;
						extractresult = X5BX5D___plumZplum_u82(image, gotpngframenumber);
						{
							tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ T50_;
							NCSTRING T51_;
							if (!!(extractresult.oResultPrivate)) goto LA48_;
							T50_.oResultPrivate = NIM_FALSE;
							T50_._oResultPrivate_1.eResultPrivate.Field0 = ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)2);
							T51_ = (NCSTRING)0;
							T51_ = error__gif50anim_u2862(extractresult);
							T50_._oResultPrivate_1.eResultPrivate.Field1 = cstrToNimstr(T51_);
							eqsink___gif50anim_u3152(Result, (&T50_));
							eqdestroy___pureZtimes_u2300(extract);
							eqdestroy___plumZplum_u152((&extractresult));
							if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
							eqdestroy___pureZtimes_u2300(canvas);
							eqdestroy___plumZplum_u233(outputpng);
							eqdestroy___gif50anim_u3187(sequenceofnewframenums);
							eqdestroy___gif50anim_u3167((&hashtoorigframenummapping));
							eqdestroy___plumZplum_u335(framedurations);
							eqdestroy___plumZplum_u470((&framedurationsresult));
							{
								if (!!(((*image).allocator == NIM_NIL))) goto LA54_;
								plum_destroy_image(image);
							}
LA54_: ;
							goto BeforeRet_;
						}
LA48_: ;
						extract = value__gif50anim_u2996(extractresult);
						T56_ = extract.len;
						T57_ = (void*)0;
						T57_ = ((void*) ((&canvas.p->data[(NI)(pngframeindex * T56_)])));
						T58_ = extract.len;
						copyMem__system_u1740(T57_, ((void*) ((&extract.p->data[((NI)0)]))), ((NI) (T58_)));
						pngframeindex += ((NI)1);
						{
							LA44_:;
						}
						{
							eqdestroy___pureZtimes_u2300(extract);
							eqdestroy___plumZplum_u152((&extractresult));
						}
						if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
					}
LA42_: ;
					h = nxt;
				} LA38: ;
			}
		}
LA35_: ;
	}
	(*outputpng).data = ((NU8*) ((&canvas.p->data[((NI)0)])));
	{
		NIM_BOOL T63_;
		NimStringV2 T66_;
		T63_ = (NIM_BOOL)0;
		T63_ = nosdirExists(outputdirectory_p1);
		if (!!(T63_)) goto LA64_;
		(*Result).oResultPrivate = NIM_FALSE;
		(*Result)._oResultPrivate_1.eResultPrivate.Field0 = ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)3);
		T66_.len = 0; T66_.p = NIM_NIL;
		T66_ = rawNewString(outputdirectory_p1.len + 25);
appendString((&T66_), TM__V84sYTa2XfwkRnO1E5HVXQ_11);
appendString((&T66_), outputdirectory_p1);
appendString((&T66_), TM__V84sYTa2XfwkRnO1E5HVXQ_13);
		(*Result)._oResultPrivate_1.eResultPrivate.Field1 = T66_;
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
		eqdestroy___pureZtimes_u2300(canvas);
		eqdestroy___plumZplum_u233(outputpng);
		eqdestroy___gif50anim_u3187(sequenceofnewframenums);
		eqdestroy___gif50anim_u3167((&hashtoorigframenummapping));
		eqdestroy___plumZplum_u335(framedurations);
		eqdestroy___plumZplum_u470((&framedurationsresult));
		{
			if (!!(((*image).allocator == NIM_NIL))) goto LA69_;
			plum_destroy_image(image);
		}
LA69_: ;
		goto BeforeRet_;
	}
LA64_: ;
	colontmpD_ = slash___stdZpaths_u45(outputdirectory_p1, TM__V84sYTa2XfwkRnO1E5HVXQ_15);
	imageexportresult = saveImageAs__plumZplum_u175(((tyObject_Image__rM6yxDiUi1XRhL0Yxrk0EQ*) (outputpng)), colontmpD_);
	{
		NimStringV2 colontmpD__4;
		NimStringV2 T76_;
		NCSTRING T77_;
		if (!!(imageexportresult.oResultPrivate)) goto LA73_;
		colontmpD__4.len = 0; colontmpD__4.p = NIM_NIL;
		(*Result).oResultPrivate = NIM_FALSE;
		(*Result)._oResultPrivate_1.eResultPrivate.Field0 = ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)3);
		T76_.len = 0; T76_.p = NIM_NIL;
		T77_ = (NCSTRING)0;
		T77_ = error__gif50anim_u3034(imageexportresult);
		colontmpD__4 = cstrToNimstr(T77_);
		T76_ = rawNewString(colontmpD__4.len + 24);
appendString((&T76_), TM__V84sYTa2XfwkRnO1E5HVXQ_17);
appendString((&T76_), colontmpD__4);
		(*Result)._oResultPrivate_1.eResultPrivate.Field1 = T76_;
		if (colontmpD__4.p && !(colontmpD__4.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD__4.p);
}
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
		eqdestroy___pureZtimes_u2300(canvas);
		eqdestroy___plumZplum_u233(outputpng);
		eqdestroy___gif50anim_u3187(sequenceofnewframenums);
		eqdestroy___gif50anim_u3167((&hashtoorigframenummapping));
		eqdestroy___plumZplum_u335(framedurations);
		eqdestroy___plumZplum_u470((&framedurationsresult));
		{
			if (!!(((*image).allocator == NIM_NIL))) goto LA80_;
			plum_destroy_image(image);
		}
LA80_: ;
		goto BeforeRet_;
		{
			LA75_:;
		}
		{
			if (colontmpD__4.p && !(colontmpD__4.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD__4.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
	}
LA73_: ;
	asmfilename.len = 0; asmfilename.p = NIM_NIL;
	asmfilename = slash___stdZpaths_u45(outputdirectory_p1, TM__V84sYTa2XfwkRnO1E5HVXQ_19);
	T86_ = (FILE*)0;
	T86_ = open__stdZsyncio_u458(asmfilename, ((tyEnum_FileMode__kCMmS8eA26MuSzmlLMiiIg)1), ((NI)-1));
	if (NIM_UNLIKELY(*nimErr_)) goto LA85_;
	asmfile = T86_;
	{
		NI index;
		NI item;
		NI i_4;
		NI L_2;
		NI T89_;
		index = (NI)0;
		item = (NI)0;
		i_4 = ((NI)0);
		T89_ = sequenceofnewframenums.len;
		L_2 = T89_;
		{
			while (1) {
				NimStringV2 colontmpD__5;
				NimStringV2 colontmpD__6;
				NimStringV2 colontmpD__7;
				NimStringV2 colontmpD__8;
				NimStringV2 colontmpD__9;
				NF framelength;
				tyArray__nHXaesL0DJZHyVS07ARPRA T93_;
				NimStringV2 T94_;
				if (!(i_4 < L_2)) goto LA91;
				colontmpD__5.len = 0; colontmpD__5.p = NIM_NIL;
				colontmpD__6.len = 0; colontmpD__6.p = NIM_NIL;
				colontmpD__7.len = 0; colontmpD__7.p = NIM_NIL;
				colontmpD__8.len = 0; colontmpD__8.p = NIM_NIL;
				colontmpD__9.len = 0; colontmpD__9.p = NIM_NIL;
				index = i_4;
				item = sequenceofnewframenums.p->data[i_4];
				framelength = ((NF)(((NF)(((NF) (framedurations.p->data[index]))) / (NF)(1000000.0))) / (NF)(16.666666666666668));
				T94_.len = 0; T94_.p = NIM_NIL;
				colontmpD__5 = dollar___systemZdollars_u3(item);
				colontmpD__6 = nsuAlignString(colontmpD__5, ((NI)2), 32);
				colontmpD__7 = dollar___systemZdollars_u9(((NU64) (framelength)));
				colontmpD__8 = nsuAlignString(colontmpD__7, ((NI)2), 48);
				T94_ = rawNewString(colontmpD__6.len + colontmpD__8.len + 9);
appendString((&T94_), TM__V84sYTa2XfwkRnO1E5HVXQ_21);
appendString((&T94_), colontmpD__6);
appendString((&T94_), TM__V84sYTa2XfwkRnO1E5HVXQ_23);
appendString((&T94_), colontmpD__8);
				colontmpD__9 = T94_;
				T93_[0] = colontmpD__9;
				writeLine__gif50anim_u3074(asmfile, T93_, 1);
				if (NIM_UNLIKELY(*nimErr_)) goto LA92_;
				i_4 += ((NI)1);
				{
					LA92_:;
				}
				{
					if (colontmpD__9.p && !(colontmpD__9.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD__9.p);
}
					if (colontmpD__8.p && !(colontmpD__8.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD__8.p);
}
					if (colontmpD__7.p && !(colontmpD__7.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD__7.p);
}
					if (colontmpD__6.p && !(colontmpD__6.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD__6.p);
}
					if (colontmpD__5.p && !(colontmpD__5.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD__5.p);
}
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
			} LA91: ;
		}
	}
	writeLine__gif50anim_u3074(asmfile, TM__V84sYTa2XfwkRnO1E5HVXQ_24, 1);
	if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
	{
		LA87_:;
	}
	{
		close__stdZsyncio_u245(asmfile);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto LA85_;
	{
		LA85_:;
	}
	{
		if (asmfilename.p && !(asmfilename.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(asmfilename.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto LA84_;
	if (NIM_UNLIKELY(*nimErr_)) {
		LA84_:;
		if (isObjDisplayCheck(nimBorrowCurrentException()->Sup.m_type, 3, 3613052928)) {
			tyObject_ValueError__Fdda0I9b5VRT5b7JNt3Ok2g* e;
			NimStringV2 colontmpD__10;
			Exception* T105_;
			*nimErr_ = NIM_FALSE;
			e = NIM_NIL;
			colontmpD__10.len = 0; colontmpD__10.p = NIM_NIL;
			T105_ = NIM_NIL;
			T105_ = getCurrentException();
			e = ((tyObject_ValueError__Fdda0I9b5VRT5b7JNt3Ok2g*) (T105_));
			(*Result).oResultPrivate = NIM_FALSE;
			(*Result)._oResultPrivate_1.eResultPrivate.Field0 = ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)4);
			colontmpD__10 = eqdup___stdZassertions_u19((*e).Sup.Sup.message);
			(*Result)._oResultPrivate_1.eResultPrivate.Field1 = colontmpD__10;
			eqdestroy___pureZparseutils_u358(e);
			if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
			eqdestroy___pureZtimes_u2300(canvas);
			eqdestroy___plumZplum_u233(outputpng);
			eqdestroy___gif50anim_u3187(sequenceofnewframenums);
			eqdestroy___gif50anim_u3167((&hashtoorigframenummapping));
			eqdestroy___plumZplum_u335(framedurations);
			eqdestroy___plumZplum_u470((&framedurationsresult));
			{
				if (!!(((*image).allocator == NIM_NIL))) goto LA108_;
				plum_destroy_image(image);
			}
LA108_: ;
			popCurrentException();
			goto BeforeRet_;
			{
				LA104_:;
			}
			{
				eqdestroy___pureZparseutils_u358(e);
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
			popCurrentException();
			LA102_:;
		}
		else 		if (isObjDisplayCheck(nimBorrowCurrentException()->Sup.m_type, 3, 769572352)) {
			tyObject_IOError__Qi3evlt89aqWKwrBQyvZbmQ* e_2;
			NimStringV2 colontmpD__11;
			Exception* T115_;
			*nimErr_ = NIM_FALSE;
			e_2 = NIM_NIL;
			colontmpD__11.len = 0; colontmpD__11.p = NIM_NIL;
			T115_ = NIM_NIL;
			T115_ = getCurrentException();
			e_2 = ((tyObject_IOError__Qi3evlt89aqWKwrBQyvZbmQ*) (T115_));
			(*Result).oResultPrivate = NIM_FALSE;
			(*Result)._oResultPrivate_1.eResultPrivate.Field0 = ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)4);
			colontmpD__11 = eqdup___stdZassertions_u19((*e_2).Sup.Sup.message);
			(*Result)._oResultPrivate_1.eResultPrivate.Field1 = colontmpD__11;
			eqdestroy___system_u6230(e_2);
			if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
			eqdestroy___pureZtimes_u2300(canvas);
			eqdestroy___plumZplum_u233(outputpng);
			eqdestroy___gif50anim_u3187(sequenceofnewframenums);
			eqdestroy___gif50anim_u3167((&hashtoorigframenummapping));
			eqdestroy___plumZplum_u335(framedurations);
			eqdestroy___plumZplum_u470((&framedurationsresult));
			{
				if (!!(((*image).allocator == NIM_NIL))) goto LA118_;
				plum_destroy_image(image);
			}
LA118_: ;
			popCurrentException();
			goto BeforeRet_;
			{
				LA114_:;
			}
			{
				eqdestroy___system_u6230(e_2);
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA112_;
			popCurrentException();
			LA112_:;
		}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
	nimZeroMem((void*)Result, sizeof(tyObject_Result__IlnbN9bLA2dnFUVXwvIRDJQ));
	(*Result).oResultPrivate = NIM_TRUE;
	if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
	eqdestroy___pureZtimes_u2300(canvas);
	eqdestroy___plumZplum_u233(outputpng);
	eqdestroy___gif50anim_u3187(sequenceofnewframenums);
	eqdestroy___gif50anim_u3167((&hashtoorigframenummapping));
	eqdestroy___plumZplum_u335(framedurations);
	eqdestroy___plumZplum_u470((&framedurationsresult));
	{
		if (!!(((*image).allocator == NIM_NIL))) goto LA124_;
		plum_destroy_image(image);
	}
LA124_: ;
	goto BeforeRet_;
	{
		LA7_:;
	}
	{
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
		eqdestroy___pureZtimes_u2300(canvas);
		eqdestroy___plumZplum_u233(outputpng);
		eqdestroy___gif50anim_u3187(sequenceofnewframenums);
		eqdestroy___gif50anim_u3167((&hashtoorigframenummapping));
		eqdestroy___plumZplum_u335(framedurations);
		eqdestroy___plumZplum_u470((&framedurationsresult));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
	{
		LA6_:;
	}
	{
		{
			if (!!(((*image).allocator == NIM_NIL))) goto LA132_;
			plum_destroy_image(image);
		}
LA132_: ;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyTuple__kubDQF3feIfhpvzu9cioZEQ, eqdup___gif50anim_u3131)(tyTuple__kubDQF3feIfhpvzu9cioZEQ src_p0) {
	tyTuple__kubDQF3feIfhpvzu9cioZEQ result;
	nimZeroMem((void*)(&result), sizeof(tyTuple__kubDQF3feIfhpvzu9cioZEQ));
	result.Field0 = src_p0.Field0;
	result.Field1 = eqdup___stdZassertions_u19(src_p0.Field1);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___gif50anim_u3125)(tyTuple__kubDQF3feIfhpvzu9cioZEQ* dest_p0) {
	if ((*dest_p0).Field1.p && !((*dest_p0).Field1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc((*dest_p0).Field1.p);
}
}

N_LIB_PRIVATE void PreMainInner(void) {
}

N_LIB_PRIVATE int cmdCount;
N_LIB_PRIVATE char** cmdLine;
N_LIB_PRIVATE char** gEnv;
N_LIB_PRIVATE void PreMain(void) {
#if 0
	void (*volatile inner)(void);
	inner = PreMainInner;
	atmdotdotatsdotdotatsdotdotatsdotdotatsdotdotatsoptatsnimatslibatssystemdotnim_Init000();
	(*inner)();
#else
	atmdotdotatsdotdotatsdotdotatsdotdotatsdotdotatsoptatsnimatslibatssystemdotnim_Init000();
	PreMainInner();
#endif
}

N_LIB_PRIVATE N_CDECL(void, NimMainInner)(void) {
	NimMainModule();
}

N_CDECL(void, NimMain)(void) {
#if 0
	void (*volatile inner)(void);
	PreMain();
	inner = NimMainInner;
	(*inner)();
#else
	PreMain();
	NimMainInner();
#endif
}

int main(int argc, char** args, char** env) {
	cmdLine = args;
	cmdCount = argc;
	gEnv = env;
	NimMain();
	return nim_program_result;
}

N_LIB_PRIVATE N_NIMCALL(void, NimMainModule)(void) {
{
NIM_BOOL* nimErr_;
nimErr_ = nimErrorFlag();
	{
		if (!(((NI) (cmdCount)) < ((NI)3))) goto LA3_;
		writeLine__gif50anim_u3074(stderr, TM__V84sYTa2XfwkRnO1E5HVXQ_4, 1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		quit__system_u5504(((NI)0));
	}
LA3_: ;
	{
		inputfile__gif50anim_u3378 = cstrToNimstr(cmdLine[((NI)1)]);
		outputdirectory__gif50anim_u3379 = cstrToNimstr(cmdLine[((NI)2)]);
		main__gif50anim_u38(inputfile__gif50anim_u3378, outputdirectory__gif50anim_u3379, (&programresult__gif50anim_u3380));
		if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
		{
			NimStringV2 colontmpD_;
			NimStringV2 T12_;
			tyArray__nHXaesL0DJZHyVS07ARPRA T19_;
			NimStringV2 T20_;
			if (!!(programresult__gif50anim_u3380.oResultPrivate)) goto LA9_;
			colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
			error__gif50anim_u3392 = error__gif50anim_u3387((&programresult__gif50anim_u3380));
			T12_.len = 0; T12_.p = NIM_NIL;
			switch (error__gif50anim_u3392.Field0) {
			case ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)0):
			{
				preamble__gif50anim_u3393 = TM__V84sYTa2XfwkRnO1E5HVXQ_27;
			}
			break;
			case ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)1):
			{
				NimStringV2 T15_;
				T15_.len = 0; T15_.p = NIM_NIL;
				T15_ = rawNewString(inputfile__gif50anim_u3378.len + 20);
appendString((&T15_), TM__V84sYTa2XfwkRnO1E5HVXQ_29);
appendString((&T15_), inputfile__gif50anim_u3378);
				preamble__gif50anim_u3393 = T15_;
			}
			break;
			case ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)2):
			{
				preamble__gif50anim_u3393 = TM__V84sYTa2XfwkRnO1E5HVXQ_31;
			}
			break;
			case ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)3):
			{
				preamble__gif50anim_u3393 = TM__V84sYTa2XfwkRnO1E5HVXQ_33;
			}
			break;
			case ((tyEnum_ConversionError__NcP8ND4a88eXtrDAVzG3hg)4):
			{
				preamble__gif50anim_u3393 = TM__V84sYTa2XfwkRnO1E5HVXQ_35;
			}
			break;
			}
			T20_.len = 0; T20_.p = NIM_NIL;
			T20_ = rawNewString(preamble__gif50anim_u3393.len + error__gif50anim_u3392.Field1.len + 2);
appendString((&T20_), preamble__gif50anim_u3393);
appendString((&T20_), TM__V84sYTa2XfwkRnO1E5HVXQ_37);
appendString((&T20_), error__gif50anim_u3392.Field1);
			colontmpD_ = T20_;
			T19_[0] = colontmpD_;
			writeLine__gif50anim_u3074(stderr, T19_, 1);
			if (NIM_UNLIKELY(*nimErr_)) goto LA11_;
			result__gif50anim_u3377 = ((NI) (error__gif50anim_u3392.Field0));
			{
				LA11_:;
			}
			{
				if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
				if (preamble__gif50anim_u3393.p && !(preamble__gif50anim_u3393.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(preamble__gif50anim_u3393.p);
}
				eqdestroy___gif50anim_u3125((&error__gif50anim_u3392));
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
		}
		goto LA7_;
LA9_: ;
		{
			result__gif50anim_u3377 = ((NI)0);
		}
LA7_: ;
		{
			LA6_:;
		}
		{
			eqdestroy___gif50anim_u3143((&programresult__gif50anim_u3380));
			if (outputdirectory__gif50anim_u3379.p && !(outputdirectory__gif50anim_u3379.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(outputdirectory__gif50anim_u3379.p);
}
			if (inputfile__gif50anim_u3378.p && !(inputfile__gif50anim_u3378.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(inputfile__gif50anim_u3378.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	quit__system_u5504(result__gif50anim_u3377);
	BeforeRet_: ;
	nimTestErrorFlag();
}
}

